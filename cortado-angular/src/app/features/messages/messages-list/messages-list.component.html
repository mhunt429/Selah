<div class="py-6">
  <div class="mb-6">
    <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Messages</h1>
    <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">All your messages in one place.</p>
  </div>

  @if (loading) {
    <div class="rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-8 text-center">
      <p class="text-gray-500 dark:text-gray-400">Loading messagesâ€¦</p>
    </div>
  } @else if (messages.length === 0) {
    <app-card class="p-8 text-center">
      <lucide-angular name="mail" class="mx-auto h-12 w-12 text-gray-400 dark:text-gray-500"></lucide-angular>
      <h2 class="mt-4 text-lg font-semibold text-gray-900 dark:text-white">No messages</h2>
      <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">You don't have any messages yet.</p>
    </app-card>
  } @else {
    <app-card cardClasses="rounded-lg shadow p-0 overflow-hidden">
      <ul class="divide-y divide-gray-200 dark:divide-gray-700">
        @for (message of messages; track message.id) {
          <li>
            <a
              [routerLink]="['/messages', message.id]"
              [ngClass]="{
                'font-semibold bg-teal-50 dark:bg-teal-950/40 dark:border-l-4 dark:border-teal-500': !message.read,
                'font-normal': message.read,
              }"
              class="flex items-center gap-4 px-6 py-4 text-gray-900 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors block border-l-4 border-transparent"
            >
              <lucide-angular
                name="mail"
                [ngClass]="{
                  'text-teal-600 dark:text-teal-400': !message.read,
                  'text-gray-400 dark:text-gray-500': message.read,
                }"
                class="h-5 w-5 shrink-0"
              ></lucide-angular>
              <div class="min-w-0 flex-1">
                <span class="block truncate">{{ message.subject }}</span>
                @if (message.sender) {
                  <span class="text-xs text-gray-500 dark:text-gray-400">{{ message.sender }}</span>
                }
              </div>
              <span class="shrink-0 text-sm text-gray-500 dark:text-gray-400">
                {{ message.sentAt | date : 'mediumDate' }}
              </span>
            </a>
          </li>
        }
      </ul>
    </app-card>
  }
</div>
