<div class="py-6">
  @if (loading()) {
    <div class="rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-8 text-center">
      <p class="text-gray-500 dark:text-gray-400">Loading messageâ€¦</p>
    </div>
  } @else if (notFound()) {
    <app-card class="p-8 text-center">
      <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Message not found</h2>
      <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">This message may have been removed or the link is invalid.</p>
      <a
        routerLink="/messages"
        class="mt-4 inline-flex items-center gap-2 text-teal-600 dark:text-teal-400 hover:underline"
      >
        <lucide-angular name="arrow-left" class="h-4 w-4"></lucide-angular>
        Back to messages
      </a>
    </app-card>
  } @else if (message(); as msg) {
    <a
      routerLink="/messages"
      class="mb-4 inline-flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-teal-600 dark:hover:text-teal-400"
    >
      <lucide-angular name="arrow-left" class="h-4 w-4"></lucide-angular>
      Back to messages
    </a>

    <app-card cardClasses="rounded-lg shadow p-6">
      <header class="border-b border-gray-200 dark:border-gray-700 pb-4">
        <h1 class="text-xl font-semibold text-gray-900 dark:text-white">{{ msg.subject }}</h1>
        <div class="mt-2 flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-500 dark:text-gray-400">
          @if (msg.sender) {
            <span>From: {{ msg.sender }}</span>
          }
          <span>{{ msg.sentAt | date : 'medium' }}</span>
        </div>
      </header>

      <div
        class="message-body mt-4 prose prose-gray dark:prose-invert max-w-none"
        [innerHTML]="safeBody()"
      ></div>
    </app-card>
  }
</div>
